---
# tasks file for baseline

- name: Run the equivalent of "apt-get update" as a separate step
  apt:
    update_cache: yes

- name: Update all packages to the latest version
  apt:
    upgrade: dist

- name: Remove useless packages from the cache
  apt:
    autoclean: yes

- name: Remove dependencies that are no longer required
  apt:
    autoremove: yes

- name: Install a list of packages
  apt:
    pkg:
    - ufw

- name: Reject everything and enable UFW
  ufw:
    state: enabled
    logging: 'on'
    policy: reject

- name: Allow port 22
  ufw:
    rule: allow
    name: OpenSSH
